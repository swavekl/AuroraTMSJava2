<div class="center">
  <h2 class="mat-headline-5" style="text-align: center">Reset Password</h2>
  <mat-card appearance="outlined" fxLayout="column" fxLayoutAlign="center center">
    <mat-card-content>
      <form name="form" (ngSubmit)="f.form.valid" #f="ngForm" novalidate>
        <div #fgPasswords="ngModelGroup" ngModelGroup="passwords" appValuesMatch="password,password2"
             fxLayout="column" class="form-group">
          <p class="password-instructions">{{ passwordCriteria.passwordRequirements }}</p>
          <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
            <mat-form-field fxFlex="90%">
              <input [type]="showPassword ? 'text' : 'password'"
                     matInput placeholder="Password" name="password" [(ngModel)]="password"
                     #passwordCtrl="ngModel" required [pattern]="passwordCriteria.passwordPattern"/>
              <mat-error *ngIf="passwordCtrl?.errors?.required">Password is required</mat-error>
              <mat-error *ngIf="passwordCtrl?.errors?.pattern">Invalid password</mat-error>
            </mat-form-field>
            <button fxFlex="10%" mat-mini-fab style="background-color: white; margin-top: 20px;"
                    (click)="toggleShowPassword()" aria-label="Show/hide password">
              <mat-icon
                class="material-icons md-dark md-inactive">{{ showPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
            </button>
          </div>
          <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
            <mat-form-field fxFlex="90%">
              <input [type]="showPassword2 ? 'text' : 'password'"
                     matInput placeholder="Reenter Password" name="password2" [(ngModel)]="password2"
                     #password2Ctrl="ngModel"
                     required [pattern]="passwordCriteria.passwordPattern"
                     [errorStateMatcher]="crossFieldErrorMatcher"/>
              <mat-error *ngIf="password2Ctrl.errors?.required">Password is required</mat-error>
              <mat-error *ngIf="password2Ctrl.errors?.pattern">Invalid password</mat-error>
              <mat-error *ngIf="fgPasswords?.errors?.appValuesMatch && password2Ctrl.touched">Passwords don't match
              </mat-error>
            </mat-form-field>
            <button type="button" fxFlex="10%" mat-mini-fab style="background-color: white"
                    aria-label="Show/hide password" (click)="toggleShowPassword2()">
              <mat-icon
                class="material-icons md-dark md-inactive">{{ showPassword2 ? 'visibility' : 'visibility_off' }}</mat-icon>
            </button>
            <!--                  <p>fgPasswords status: {{ fgPasswords.status | json }} </p>-->
            <!--                  <p>fgPasswords errors: {{ fgPasswords?.errors | json }}</p>-->
            <!--                  <p>password2 touched: {{ password2Ctrl.touched }}</p>-->
          </div>
        </div>
      </form>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="primary" [disabled]="!f.form.valid" (click)="resetPassword()">CHANGE</button>
    </mat-card-actions>
  </mat-card>
</div>
