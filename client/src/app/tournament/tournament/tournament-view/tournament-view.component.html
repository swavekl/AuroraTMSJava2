<div fxLayout="row" *ngIf="tournament">
  <div fxFlex></div>
  <div fxFlex.lt-md="100%" fxFlex="70%">
    <mat-card appearance="outlined">
      <mat-card-header>
          <div fxLayout="column">
            <mat-card-title>{{ tournament.name }}</mat-card-title>
            <div fxLayout="row">
              <app-star-level [numStars]="tournament.starLevel" [compact]="false"></app-star-level>
              <div class="mat-headline-6" *ngIf="tournament.totalPrizeMoney > 0" style="margin: 0 0 0 16px;">{{ tournament.totalPrizeMoney | currency : 'USD' : 'symbol' : '1.0-0'}}</div>
            </div>
            <div class="mat-headline-6">{{ [tournament.startDate, tournament.endDate] | dateRange }}</div>
          </div>
      </mat-card-header>
      <mat-card-content class="mat-headline-6">
        <table class="tournament-info-table">
          <tbody>
          <tr>
            <td></td>
            <td class="heading mat-body-1">Venue</td>
          </tr>
          <tr>
            <td class="icon-column">
              <button mat-fab color="primary">
                <a [href]="getDirectionsURL()">
                  <mat-icon class="button-icon">assistant_direction</mat-icon>
                </a>
              </button>
            </td>
            <td class="text-column">
              {{ tournament.venueName }}<br>
              {{ tournament.streetAddress }}<br>
              {{ tournament.city }}, {{ tournament.state }}
            </td>
          </tr>
          <tr>
            <td></td>
            <td class="heading mat-body-1">Tournament Director</td>
          </tr>
          <tr>
            <td class="icon-column">
              <button mat-fab color="primary">
              <a href="tel:{{tournament.phone}}">
                <mat-icon class="button-icon">call</mat-icon>
              </a>
              </button>
            </td>
            <td class="text-column">
              <div>{{tournament.contactName}}</div>
              <div>{{tournament.phone}}</div>
              <div>
                <a href="mailto:{{tournament.email}}">
                  {{tournament.email}}
                </a>
              </div>
            </td>
          </tr>
          <tr>
            <td></td>
            <td class="heading mat-body-1">Players Entered</td>
          </tr>
          <tr>
            <td class="icon-column">
              <button mat-fab color="primary">
              <a (click)="showPlayers()">
                <mat-icon class="button-icon">groups</mat-icon>
              </a>
              </button>
            </td>
            <td class="text-column mat-headline-4">
              {{ tournament.numEntries }} ({{percentFull | percent}} full)
            </td>
          </tr>
          <tr>
            <td></td>
            <td class="heading mat-body-1">Key dates</td>
          </tr>
          <tr>
            <td class="icon-column">
              <mat-icon class="non-button-icon" color="primary">calendar_month</mat-icon>
            </td>
            <td>
              <table class="dates-table">
                <tbody>
                <tr>
                  <td class="date-name">Ratings Eligibility</td>
                  <td class="date-value">{{tournament.configuration.eligibilityDate | date}}</td>
                </tr>
                <tr>
                  <td class="date-name">Full Refund</td>
                  <td class="date-value">{{tournament.configuration.refundDate | date}}</td>
                </tr>
                <tr *ngIf="tournament.configuration.lateEntryFee > 0">
                  <td class="date-name">Late Entry</td>
                  <td class="date-value">{{tournament.configuration.lateEntryDate | date}}</td>
                </tr>
                <tr>
                  <td class="date-name">Entry Cutoff</td>
                  <td class="date-value">{{tournament.configuration.entryCutoffDate | date}}</td>
                </tr>
                </tbody>
              </table>
            </td>
          </tr>
          </tbody>
        </table>
      </mat-card-content>
      <mat-card-actions>
        <button *ngIf="canWithdraw()" mat-raised-button type="button" (click)="onWithdraw()">Withdraw</button>
        <button *ngIf="resultsAvailable()" mat-raised-button type="button" [routerLink]="['/results', tournament.id]">Results</button>
        <span fxFlex></span>
<!--        <button *ngIf="canEnterPlayer()" mat-raised-button type="button" color="primary" (click)="onEnterPlayer()">Enter Player</button>-->
        <button *ngIf="canEnter()" mat-raised-button type="button" color="primary" (click)="onEnter()">Enter</button>
        <button *ngIf="canView()" mat-raised-button type="button" color="primary" (click)="onView()">View</button>
      </mat-card-actions>
    </mat-card>
    <mat-card appearance="outlined">
      <mat-card-subtitle>
        <div mat-line fxLayout="row">
          <div fxFlex="60%">Events</div>
          <div fxFlex="40%" style="text-align: right;">Spots (Taken/Max)</div>
        </div>
      </mat-card-subtitle>
      <mat-card-content>
        <mat-divider></mat-divider>
        <mat-list>
          <mat-list-item *ngFor="let tournamentEvent of tournamentEvents; first as isFirst; last as isLast">
            <mat-divider></mat-divider>
            <div mat-line fxLayout="row">
              <div fxFlex="80%">{{tournamentEvent.name}} </div>
              <div fxFlex="20%" style="text-align: right;">({{tournamentEvent.numEntries}}
                /{{tournamentEvent.maxEntries}})
              </div>
            </div>
            <div
              mat-line>{{ tournamentEvent.day | eventDay: tournamentStartDate }} {{ tournamentEvent.startTime | startTime }}</div>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>
  <div fxFlex></div>
</div>
