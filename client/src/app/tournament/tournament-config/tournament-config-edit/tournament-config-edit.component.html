<div fxLayout="row">
  <div fxFlex></div>
  <div fxFlex.lt-md="100%" fxFlex="60%">
    <form name="form" (ngSubmit)="onSave(f.value)" #f="ngForm" novalidate>
      <mat-tab-group>
        <mat-tab label="General Information">
          <mat-card style="height: 90%">
            <mat-card-content>
              <input type="hidden" name="id" [ngModel]="tournament?.id">
              <div fxLayout.lt-sm="column" fxLayout="row" fxLayoutGap="10px">
                <mat-form-field fxFlex="80%">
                  <mat-label>Name</mat-label>
                  <input matInput type="text" name="name" [ngModel]="tournament?.name" required>
                </mat-form-field>
                <mat-form-field fxFlex="20%">
                  <mat-label>Star Level</mat-label>
                  <input matInput type="number" name="starLevel" [ngModel]="tournament?.starLevel" min="0" max="5" required>
                  <mat-error>Enter value between 0 and 5</mat-error>
                </mat-form-field>
              </div>
              <div fxLayout="row" fxLayoutGap="10px">
                <mat-form-field fxFlex="50%">
                  <mat-label>Start date</mat-label>
                  <input matInput [matDatepicker]="startDate" [ngModel]="tournament?.startDate" name="startDate" required>
                  <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                  <mat-datepicker #startDate></mat-datepicker>
                </mat-form-field>
                <mat-form-field fxFlex="50%">
                  <mat-label>End date</mat-label>
                  <input matInput [matDatepicker]="endDate" [ngModel]="tournament?.endDate" name="endDate" required>
                  <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
                  <mat-datepicker #endDate disabled="false"></mat-datepicker>
                </mat-form-field>
              </div>
              <div fxLayout="row" fxLayoutGap="10px">
                <mat-form-field fxFlex="50%">
                  <mat-label>Late entry date</mat-label>
                  <input matInput [matDatepicker]="lateEntryDate"
                         [ngModel]="tournament?.configuration?.lateEntryDate" name="lateEntryDate" required>
                  <mat-datepicker-toggle matSuffix [for]="lateEntryDate"></mat-datepicker-toggle>
                  <mat-datepicker #lateEntryDate></mat-datepicker>
                </mat-form-field>
                <mat-form-field fxFlex="50%">
                  <mat-label>Eligibility Date</mat-label>
                  <input matInput [matDatepicker]="eligibilityDate" [ngModel]="tournament?.configuration?.eligibilityDate"
                         name="eligibilityDate" #egCtrl="ngModel"
                         required appDateBefore="startDate">
                  <mat-datepicker-toggle matSuffix [for]="eligibilityDate"></mat-datepicker-toggle>
                  <mat-datepicker #eligibilityDate disabled="false"></mat-datepicker>
                  <mat-error *ngIf="egCtrl.invalid && (egCtrl.dirty || egCtrl.touched)">Eligibility date must be before
                    tournament start date
                  </mat-error>
                </mat-form-field>
              </div>
              <mat-card-subtitle class="mat-title">Venue Information</mat-card-subtitle>
              <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                <mat-form-field fxFlex="100%">
                  <mat-label>Venue Name</mat-label>
                  <input matInput type="text" name="venueName"
                         [ngModel]="tournament?.venueName" required>
                </mat-form-field>
              </div>
              <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                <mat-form-field fxFlex="100%">
                  <mat-label>Street Address</mat-label>
                  <input matInput type="text" name="streetAddress"
                         [ngModel]="tournament?.streetAddress" required>
                </mat-form-field>
              </div>
              <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                <mat-form-field fxFlex="55%">
                  <mat-label>City</mat-label>
                  <input matInput type="text" name="city" [ngModel]="tournament?.city" required>
                </mat-form-field>
                <mat-form-field fxFlex="20%">
                  <mat-label>State</mat-label>
                  <mat-select matInput type="text" name="state" [ngModel]="tournament?.state" required>
                    <mat-option *ngFor="let state of statesList" value="{{state.abbreviation}}">{{state.abbreviation}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field fxFlex="25%">
                  <mat-label>Zip Code</mat-label>
                  <input matInput type="text" name="zipCode"
                         [ngModel]="tournament?.zipCode"
                         pattern="[0-9]{5}" maxlength="5" #zipCode="ngModel">
                  <mat-error *ngIf="zipCode.control?.hasError('pattern')">Zip code must be 5 digit number</mat-error>
                </mat-form-field>
              </div>
              <mat-card-subtitle class="mat-title">Contact Information</mat-card-subtitle>
              <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                <mat-form-field fxFlex="70%">
                  <mat-label>Contact Name</mat-label>
                  <input matInput type="text" name="contactName" [ngModel]="tournament?.contactName" required>
                </mat-form-field>
              </div>
              <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                <mat-form-field fxFlex="70%">
                  <mat-label>Email</mat-label>
                  <input matInput type="email" name="email" [ngModel]="tournament?.email"
                         email>
                  <mat-error>Invalid email address</mat-error>
                </mat-form-field>
                <mat-form-field fxFlex="30%">
                  <mat-label>Phone</mat-label>
                  <input matInput type="tel" name="phone" [ngModel]="tournament?.phone"
                         required>
                  <mat-error>Invalid phone</mat-error>
                </mat-form-field>
              </div>
            </mat-card-content>
<!--            <mat-card-actions>-->
<!--            </mat-card-actions>-->
          </mat-card>
        </mat-tab>
        <mat-tab label="Other Information">
          <mat-card style="height: 90%">
            <mat-card-content>
            <div fxLayout.lt-sm="column" fxLayout="row" fxLayoutGap="10px">
              <mat-form-field fxFlex="100%">
                <mat-label>Blank entry form URL</mat-label>
                <input matInput type="text" name="blankEntryUrl" [ngModel]="tournament?.configuration?.blankEntryUrl">
              </mat-form-field>
            </div>
            <div fxLayout.lt-sm="column" fxLayout="row" fxLayoutGap="10px">
              <mat-form-field fxFlex="40%">
                <mat-label>Maximum daily events</mat-label>
                <input matInput type="number" name="maxDailyEvents" [ngModel]="tournament?.configuration?.maxDailyEvents" required>
              </mat-form-field>
              <mat-form-field fxFlex="40%">
                <mat-label>Maximum daily events</mat-label>
                <input matInput type="number" name="maxTournamentEvents" [ngModel]="tournament?.configuration?.maxTournamentEvents" required>
              </mat-form-field>
              <mat-form-field fxFlex="20%">
                <mat-label>Number of Tables</mat-label>
                <input matInput type="number" name="numberOfTables" [ngModel]="tournament?.configuration?.numberOfTables" required>
              </mat-form-field>
<!--              <mat-form-field fxFlex="25%">-->
<!--                <mat-label>Color of Tables</mat-label>-->
<!--                <input matInput type="text" name="maxTournamentEvents" [ngModel]="tournament?.configuration?.maxTournamentEvents" required>-->
<!--              </mat-form-field>-->
            </div>
            </mat-card-content>
          </mat-card>
        </mat-tab>
      </mat-tab-group>
      <button mat-raised-button type="submit" [disabled]="!f.form.valid">Save</button>
      <button mat-raised-button type="button" (click)="onCancel()">Cancel</button>
<!--                <p>Form values: {{ f.value | json }} </p>-->
      <!--          <p>Form status: {{ f.status | json }} </p>-->
      <!--          <p>eligibilityDate ALL errors: {{ f.controls.eligibilityDate?.errors | json }} </p>-->
      <!--<p>Zip code required is: {{ zipCode.control?.errors?.required | json }} </p>-->
      <!--<p>Zip code pattern is: {{ zipCode.control?.errors?.pattern | json }} </p>-->
    </form>
  </div>
  <div fxFlex></div>
</div>

